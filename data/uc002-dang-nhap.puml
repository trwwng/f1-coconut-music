@startuml UC002-Dang-Nhap
!theme plain
title UC002 - ÄÄƒng Nháº­p

skinparam rectangle {
    BackgroundColor lightblue
    BorderColor blue
}

skinparam frame {
    BackgroundColor lightgray
    BorderColor black
}

rectangle "Coconut Music - ÄÄƒng Nháº­p" {
    frame "Header" as header {
        [Logo Coconut Music]
        note right: "ğŸµ Welcome Back!"
    }

    frame "Login Form" as form {
        rectangle "ğŸ‘¤ Username/Email" as username
        rectangle "ğŸ”’ Password" as password
        rectangle "â˜‘ï¸ Remember Me" as remember
        rectangle "ğŸ”‘ ÄÄƒng Nháº­p" as login_btn #lightgreen
    }

    frame "Quick Actions" as actions {
        rectangle "â“ QuÃªn máº­t kháº©u?" as forgot_password
        rectangle "ğŸ“ ChÆ°a cÃ³ tÃ i khoáº£n? ÄÄƒng kÃ½" as register_link
    }

    frame "Authentication States" as auth_states {
        rectangle "â³ Äang xÃ¡c thá»±c..." as loading #yellow
        rectangle "âœ… ÄÄƒng nháº­p thÃ nh cÃ´ng" as success #lightgreen
        rectangle "âŒ Sai thÃ´ng tin Ä‘Äƒng nháº­p" as error #lightcoral
        rectangle "ğŸ”’ TÃ i khoáº£n bá»‹ khÃ³a" as blocked #red
    }

    frame "JWT Token Flow" as jwt {
        rectangle "ğŸ« Generate JWT Token" as generate_token
        rectangle "ğŸ’¾ Store in localStorage" as store_token
        rectangle "ğŸ  Redirect to Home" as redirect_home
    }

    frame "Security Features" as security {
        note as security_note
            ğŸ›¡ï¸ Security:
            â€¢ Rate limiting: 5 attempts/5min
            â€¢ JWT expiry: 24 hours
            â€¢ Secure HTTP-only cookies
            â€¢ CSRF protection
        end note
    }
}

' Flow connections
username --> password
password --> remember
remember --> login_btn
login_btn --> loading
loading --> success : "Valid Credentials"
loading --> error : "Invalid Credentials"
loading --> blocked : "Account Blocked"

success --> generate_token
generate_token --> store_token
store_token --> redirect_home

' Alternative flows
forgot_password ..> "Reset Password Flow" : "UC005"
register_link ..> "Register Flow" : "UC001"
error ..> username : "Try Again"

footer UC002 - ÄÄƒng Nháº­p: User xÃ¡c thá»±c vÃ  truy cáº­p há»‡ thá»‘ng
@enduml
